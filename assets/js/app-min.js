(()=>{let e=[],t=[],n=[],d=[];const l=document.getElementById("btn-new-game"),a=document.getElementById("btn-takeone"),c=document.getElementById("btn-stop"),s=e=>{const t=["C","H","S","D"];for(let n=1;n<14;n++){let d=n;1===n&&(d="A"),11===n&&(d="J"),12===n&&(d="Q"),13===n&&(d="K"),t.forEach(t=>e.push(`${d}${t}`))}return _.shuffle(e)};l.addEventListener("click",()=>r()),a.addEventListener("click",()=>o("player-cards",n,"player-score",e)),c.addEventListener("click",()=>{a.disabled=!0,c.disabled=!0,g(u(n))});const r=()=>{e=s(e),t=s(t),n=[],d=[],document.getElementById("player-cards").innerHTML="",document.getElementById("comp-cards").innerHTML="",p(0,"comp-score"),p(0,"player-score"),a.disabled=!1,a.disabled=!1,c.disabled=!1},o=(t,n,d,l)=>{if(0==e.length)return void alert("Debe iniciar el juego");let a=l.pop(),c=m(a);n.push({card:a,value:c}),i(t,{card:a});let s=u(n);p(s,d)},i=(e,t)=>{const{card:n}=t,d=document.getElementById(e),l=document.createElement("img");l.src=`assets/suit-cards/${n}.png`,l.classList.add("card"),d.appendChild(l)},m=e=>{let t=e.substring(0,e.length-1);return isNaN(t)&&(t="A"===t?11:10),+t},u=e=>e.map(e=>e.value).reduce((e,t)=>e+t,0),p=(e,t)=>{document.getElementById(t).textContent=e},g=e=>{do{o("comp-cards",d,"comp-score",t)}while(e<=21&&(u(d)<=e&&u(d)<=21));let l=u(n),a=u(d),c=l>21&&a<=21||l<=21&&a<=21&&l<a,s=l<=21&&a>21||l<=21&&a<=21&&l>a;setTimeout(()=>{c?(alert("Perdiste"),console.log("Perdiste")):s?(alert("Ganaste"),console.log("Ganaste")):(alert("Empate"),console.log("Empate"))},500)}})();